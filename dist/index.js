// ==UserScript==
// @name              genshinSeelieEx
// @name:zh           原神规划助手扩展
// @description       description
// @description:zh    描述
// @include           https://seelie.inmagi.com/*
// @require           https://cdn.jsdelivr.net/npm/core-js-bundle@3.9.1/index.js
// @grant             unsafeWindow
// @grant             GM_setValue
// @grant             GM_download
// @grant             GM_xmlhttpRequest
// @grant             GM_openInTab
// @author            KeyPJ
// @namespace         https://github.com/KeyPJ/seelieEx
// @icon              https://www.google.com/s2/favicons?domain=inmagi.com
// @version           1.0.0
// @connect           api-takumi.mihoyo.com
// @tag               value
// ==/UserScript==

(()=>{"use strict";const e=[{nameEn:"traveler",name:"旅行者"},{nameEn:"albedo",name:"阿贝多"},{nameEn:"amber",name:"安柏"},{nameEn:"barbara",name:"芭芭拉"},{nameEn:"beidou",name:"北斗"},{nameEn:"bennett",name:"班尼特"},{nameEn:"chongyun",name:"重云"},{nameEn:"diluc",name:"迪卢克"},{nameEn:"diona",name:"迪奥娜"},{nameEn:"eula",name:"优菈"},{nameEn:"fischl",name:"菲谢尔"},{nameEn:"ganyu",name:"甘雨"},{nameEn:"hutao",name:"胡桃"},{nameEn:"jean",name:"琴"},{nameEn:"kaedeharakazuha",name:"枫原万叶"},{nameEn:"kaeya",name:"凯亚"},{nameEn:"keqing",name:"刻晴"},{nameEn:"klee",name:"可莉"},{nameEn:"lisa",name:"丽莎"},{nameEn:"lumine",name:"荧"},{nameEn:"mona",name:"莫娜"},{nameEn:"ningguang",name:"凝光"},{nameEn:"noelle",name:"诺艾尔"},{nameEn:"qiqi",name:"七七"},{nameEn:"razor",name:"雷泽"},{nameEn:"rosaria",name:"罗莎莉亚"},{nameEn:"sucrose",name:"砂糖"},{nameEn:"tartaglia",name:"达达利亚"},{nameEn:"venti",name:"温迪"},{nameEn:"xiangling",name:"香菱"},{nameEn:"xiao",name:"魈"},{nameEn:"xingqiu",name:"行秋"},{nameEn:"xinyan",name:"辛焱"},{nameEn:"yanfei",name:"烟绯"},{nameEn:"zhongli",name:"钟离"}];const n=[{level:1,asc:0,text:"1"},{level:20,asc:0,text:"20"},{level:20,asc:1,text:"20 A"},{level:40,asc:1,text:"40"},{level:40,asc:2,text:"40 A"},{level:50,asc:2,text:"50"},{level:50,asc:3,text:"50 A"},{level:60,asc:3,text:"60"},{level:60,asc:4,text:"60 A"},{level:70,asc:4,text:"70"},{level:70,asc:5,text:"70 A"},{level:80,asc:5,text:"80"},{level:80,asc:6,text:"80 A"},{level:90,asc:6,text:"90"}];var a=function(e,n,a,t){return new(a||(a=Promise))((function(o,r){function l(e){try{i(t.next(e))}catch(e){r(e)}}function c(e){try{i(t.throw(e))}catch(e){r(e)}}function i(e){var n;e.done?o(e.value):(n=e.value,n instanceof a?n:new a((function(e){e(n)}))).then(l,c)}i((t=t.apply(e,n||[])).next())}))};const t=localStorage.getItem("mihoyoAccount");let o;t&&(o=JSON.parse(t));let{game_uid:r,region:l,accountIdx:c}=o||{game_uid:"",region:"cn_qd01",accountIdx:0};function i(e){return new Promise(((n,a)=>{GM_xmlhttpRequest({method:"GET",url:e,onload:e=>{if(200==e.status){const t=JSON.parse(e.responseText),{retcode:o,message:r,data:l}=t;0===o?n(l):a(r)}else a(e.responseText)},onerror:e=>{a(e)}})}))}console.log("mihoyoAccount"),console.log({game_uid:r,region:l,accountIdx:c});a(void 0,void 0,void 0,(function*(){var n,t;if(!r||!l){const e=yield a(void 0,void 0,void 0,(function*(){try{const{list:e}=yield i("https://api-takumi.mihoyo.com/binding/api/getUserGameRolesByCookie?game_biz=hk4e_cn");return e}catch(e){return console.error(e),alert("请确认已登录米哈游论坛且绑定原神账户!"),GM_openInTab("https://bbs.mihoyo.com/ys/"),[]}}));if(0===e.length)throw new Error("账户绑定角色信息获取失败!");c>=e.length&&(c=e.length-1);const{game_uid:n,region:t}=e[c];r=n,l="cn_gf01"==t?"cn_gf01":"cn_qd01",localStorage.setItem("mihoyoAccount",JSON.stringify({game_uid:r,region:l,accountIdx:c}))}const o=(yield((e,n)=>a(void 0,void 0,void 0,(function*(){const{list:a}=yield function(e,n){return new Promise(((a,t)=>{GM_xmlhttpRequest({method:"POST",url:"https://api-takumi.mihoyo.com/event/e20200928calculate/v1/sync/avatar/list",data:JSON.stringify({element_attr_ids:[],weapon_cat_ids:[],page:1,size:50,uid:e,region:n}),onload:e=>{if(200==e.status){const n=JSON.parse(e.responseText),{retcode:o,message:r,data:l}=n;0===o?a(l):t(r)}else t(e.responseText)},onerror:e=>{t(e)}})}))}(e,n);return a})))(r,l)).map((n=>((n,t,o)=>a(void 0,void 0,void 0,(function*(){const{id:a}=n,r=`?avatar_id=${a}&uid=${t}&region=${o}`;let l=yield i("https://api-takumi.mihoyo.com/event/e20200928calculate/v1/sync/avatar/detail"+r);const{name:c}=n;let s=function(n){for(let a of e){const{name:e,nameEn:t}=a;if(n==e)return t}return console.error(`${n}查询失败`),""}(c);const m=Object.assign(Object.assign({},n),{nameEn:s});return Object.assign({character:m},l)})))(n,r,l))),s=[];try{for(var m,u=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,a=e[Symbol.asyncIterator];return a?a.call(e):(e="function"==typeof __values?__values(e):e[Symbol.iterator](),n={},t("next"),t("throw"),t("return"),n[Symbol.asyncIterator]=function(){return this},n);function t(a){n[a]=e[a]&&function(n){return new Promise((function(t,o){!function(e,n,a,t){Promise.resolve(t).then((function(n){e({value:n,done:a})}),n)}(t,o,(n=e[a](n)).done,n.value)}))}}}(o);!(m=yield u.next()).done;){let e=m.value;s.push(e)}}catch(e){n={error:e}}finally{try{m&&!m.done&&(t=u.return)&&(yield t.call(u))}finally{if(n)throw n.error}}return s})).then((e=>{console.log(e),e.forEach((e=>{!function(e){const{character:a,skill_list:t}=e,{name:o,nameEn:r}=a;let l=vue.goals;const c=l.length,i=l.findIndex((e=>"character"==e.type&&e.character==r)),{level_current:s}=a,m=function(e,a){let t=n[0],o=1;for(let r of n){const{level:n}=r;if(!(e>=n))return o==n?(console.log(`米游社数据无法判断是否突破,请自行比较${a}是否已突破`),r):t;o=n,t=r}return t}(s,o),{level_current:u}=t[0],{level_current:d}=t[1],{level_current:g}=t[2];if(i<0){const e={type:"character",character:r,current:m,goal:m,id:c},n={type:"talent",character:r,c3:!1,c5:!1,normal:{current:u,goal:u},skill:{current:d,goal:d},burst:{current:g,goal:g},id:c+1};vue.addGoal(e),"traveler"!=r?vue.addGoal(n):console.log("无法判断旅行者元素类型,请自行设置天赋")}else{const e=l[i],{goal:n}=e,{level:a,asc:t}=n,{level:o,asc:s}=m,u={type:"character",character:r,current:m,goal:o>=a&&s>=t?m:n,id:c};vue.addGoal(u)}const v=l.findIndex((e=>"talent"==e.type&&e.character==r));let f;if(v<0)f={type:"talent",character:r,c3:!1,c5:!1,normal:{current:u,goal:u},skill:{current:d,goal:d},burst:{current:g,goal:g},id:c};else{const e=l[v],{normal:n,skill:a,burst:t}=e,{goal:o}=n,{goal:r}=a,{goal:c}=t;f=Object.assign(Object.assign({},e),{normal:{current:u,goal:u>o?u:o},skill:{current:d,goal:d>r?d:r},burst:{current:g,goal:g>c?g:c}})}"traveler"!=r?vue.addGoal(f):console.log("无法判断旅行者元素类型,请自行设置天赋")}(e)}))}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90YW1wZXJtb25rZXktd2VicGFjay10ZW1wbGF0ZS8uL3NyYy9xdWVyeS50cyIsIndlYnBhY2s6Ly90YW1wZXJtb25rZXktd2VicGFjay10ZW1wbGF0ZS8uL3NyYy9zZWVsaWUudHMiLCJ3ZWJwYWNrOi8vdGFtcGVybW9ua2V5LXdlYnBhY2stdGVtcGxhdGUvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vdGFtcGVybW9ua2V5LXdlYnBhY2stdGVtcGxhdGUvLi9zcmMvY29uZmlnLnRzIl0sIm5hbWVzIjpbIm5hbWVMaXN0IiwiY2hhcmFjdGVyU3RhdHVzTGlzdCIsImxldmVsIiwiYXNjIiwidGV4dCIsIm1paG95b0FjY291bnRTdHIiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwibWlob3lvQWNjb3VudCIsIkpTT04iLCJwYXJzZSIsImdhbWVfdWlkIiwicmVnaW9uIiwiYWNjb3VudElkeCIsIm1ha2VHZXRSZXF1ZXN0IiwidXJsIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJHTV94bWxodHRwUmVxdWVzdCIsIm1ldGhvZCIsIm9ubG9hZCIsInJlc3BvbnNlIiwic3RhdHVzIiwicmVzIiwicmVzcG9uc2VUZXh0IiwicmV0Y29kZSIsIm1lc3NhZ2UiLCJkYXRhIiwib25lcnJvciIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImFjY291bnRMaXN0IiwibGlzdCIsImVyciIsImFsZXJ0IiwiR01fb3BlbkluVGFiIiwibGVuZ3RoIiwiRXJyb3IiLCJhVWlkIiwiYVJlZ2lvbiIsInNldEl0ZW0iLCJzdHJpbmdpZnkiLCJkZXRhaWxzIiwidWlkIiwiY2hhcmFjdGVyTGlzdCIsIm1ha2VQb3N0UmVxdWVzdCIsImdldENoYXJhY3RlcnMiLCJtYXAiLCJjIiwiY2hhcmFjdGVyIiwiaWQiLCJwYXJhbXMiLCJjaGFyYWN0ZXJEYXRhIiwibmFtZSIsIm5hbWVFbmdsaXNoIiwicXVlcnlOYW1lIiwiZSIsIm5hbWVFbiIsImdldENoYXJhY3Rlck5hbWUiLCJjaGFyYWN0ZXJFeCIsImdldENoYXJhY3RlckRldGFpbCIsImRldGFpbExpc3QiLCJkIiwicHVzaCIsInRoZW4iLCJmb3JFYWNoIiwidiIsImNoYXJhY3RlckRhdGFFeCIsInNraWxsX2xpc3QiLCJ0b3RhbEdvYWwiLCJ2dWUiLCJnb2FscyIsImZpbmRJbmRleCIsImciLCJ0eXBlIiwibGV2ZWxfY3VycmVudCIsImNoYXJhY3RlclN0YXR1cyIsImluaXRDaGFyYWN0ZXJTdGF0dXMiLCJpbml0TGV2ZWwiLCJub3JtYWxDdXJyZW50Iiwic2tpbGxDdXJyZW50IiwiYnVyc3RDdXJyZW50IiwiY2hhcmFjdGVyR29hbCIsImN1cnJlbnQiLCJnb2FsIiwidGFsZW50R29hbCIsImMzIiwiYzUiLCJub3JtYWwiLCJza2lsbCIsImJ1cnN0IiwiYWRkR29hbCIsInNlZWxpZUdvYWwiLCJsZXZlbEN1cnJlbnQiLCJhc2NDdXJyZW50IiwiZmluZEluZGV4MiIsIm5vcm1hbEdvYWwiLCJza2lsbEdvYWwiLCJidXJzdEdvYWwiLCJhZGRDaGFyYWN0ZXIiXSwibWFwcGluZ3MiOiJtQkFBQSxNQUFNQSxFQUFXLENBQ2IsQ0FDSSxPQUFVLFdBQ1YsS0FBUSxPQUVaLENBQ0ksT0FBVSxTQUNWLEtBQVEsT0FFWixDQUNJLE9BQVUsUUFDVixLQUFRLE1BRVosQ0FDSSxPQUFVLFVBQ1YsS0FBUSxPQUVaLENBQ0ksT0FBVSxTQUNWLEtBQVEsTUFFWixDQUNJLE9BQVUsVUFDVixLQUFRLE9BRVosQ0FDSSxPQUFVLFdBQ1YsS0FBUSxNQUVaLENBQ0ksT0FBVSxRQUNWLEtBQVEsT0FFWixDQUNJLE9BQVUsUUFDVixLQUFRLE9BRVosQ0FDSSxPQUFVLE9BQ1YsS0FBUSxNQUVaLENBQ0ksT0FBVSxTQUNWLEtBQVEsT0FFWixDQUNJLE9BQVUsUUFDVixLQUFRLE1BRVosQ0FDSSxPQUFVLFFBQ1YsS0FBUSxNQUVaLENBQ0ksT0FBVSxPQUNWLEtBQVEsS0FFWixDQUNJLE9BQVUsa0JBQ1YsS0FBUSxRQUVaLENBQ0ksT0FBVSxRQUNWLEtBQVEsTUFFWixDQUNJLE9BQVUsU0FDVixLQUFRLE1BRVosQ0FDSSxPQUFVLE9BQ1YsS0FBUSxNQUVaLENBQ0ksT0FBVSxPQUNWLEtBQVEsTUFFWixDQUNJLE9BQVUsU0FDVixLQUFRLEtBRVosQ0FDSSxPQUFVLE9BQ1YsS0FBUSxNQUVaLENBQ0ksT0FBVSxZQUNWLEtBQVEsTUFFWixDQUNJLE9BQVUsU0FDVixLQUFRLE9BRVosQ0FDSSxPQUFVLE9BQ1YsS0FBUSxNQUVaLENBQ0ksT0FBVSxRQUNWLEtBQVEsTUFFWixDQUNJLE9BQVUsVUFDVixLQUFRLFFBRVosQ0FDSSxPQUFVLFVBQ1YsS0FBUSxNQUVaLENBQ0ksT0FBVSxZQUNWLEtBQVEsUUFFWixDQUNJLE9BQVUsUUFDVixLQUFRLE1BRVosQ0FDSSxPQUFVLFlBQ1YsS0FBUSxNQUVaLENBQ0ksT0FBVSxPQUNWLEtBQVEsS0FFWixDQUNJLE9BQVUsVUFDVixLQUFRLE1BRVosQ0FDSSxPQUFVLFNBQ1YsS0FBUSxNQUVaLENBQ0ksT0FBVSxTQUNWLEtBQVEsTUFFWixDQUNJLE9BQVUsVUFDVixLQUFRLE9DS2hCLE1BQU1DLEVBQXlDLENBQzNDLENBQUNDLE1BQU8sRUFBR0MsSUFBSyxFQUFHQyxLQUFNLEtBQ3pCLENBQUNGLE1BQU8sR0FBSUMsSUFBSyxFQUFHQyxLQUFNLE1BQzFCLENBQUNGLE1BQU8sR0FBSUMsSUFBSyxFQUFHQyxLQUFNLFFBQzFCLENBQUNGLE1BQU8sR0FBSUMsSUFBSyxFQUFHQyxLQUFNLE1BQzFCLENBQUNGLE1BQU8sR0FBSUMsSUFBSyxFQUFHQyxLQUFNLFFBQzFCLENBQUNGLE1BQU8sR0FBSUMsSUFBSyxFQUFHQyxLQUFNLE1BQzFCLENBQUNGLE1BQU8sR0FBSUMsSUFBSyxFQUFHQyxLQUFNLFFBQzFCLENBQUNGLE1BQU8sR0FBSUMsSUFBSyxFQUFHQyxLQUFNLE1BQzFCLENBQUNGLE1BQU8sR0FBSUMsSUFBSyxFQUFHQyxLQUFNLFFBQzFCLENBQUNGLE1BQU8sR0FBSUMsSUFBSyxFQUFHQyxLQUFNLE1BQzFCLENBQUNGLE1BQU8sR0FBSUMsSUFBSyxFQUFHQyxLQUFNLFFBQzFCLENBQUNGLE1BQU8sR0FBSUMsSUFBSyxFQUFHQyxLQUFNLE1BQzFCLENBQUNGLE1BQU8sR0FBSUMsSUFBSyxFQUFHQyxLQUFNLFFBQzFCLENBQUNGLE1BQU8sR0FBSUMsSUFBSyxFQUFHQyxLQUFNLE8sMFNDbEo5QixNQUFNQyxFQUFtQkMsYUFBYUMsUUFBUSxpQkFDOUMsSUFBSUMsRUFDQUgsSUFDQUcsRUFBZ0JDLEtBQUtDLE1BQU1MLElBRS9CLElBQUksU0FBQ00sRUFBUSxPQUFFQyxFQUFNLFdBQUVDLEdBQWNMLEdDZmYsQ0FDbEJHLFNBQVUsR0FDVkMsT0FBUSxVQUNSQyxXQUFZLEdEcUJoQixTQUFTQyxFQUFlQyxHQUNwQixPQUFPLElBQUlDLFNBQVEsQ0FBQ0MsRUFBU0MsS0FDekJDLGtCQUFrQixDQUNkQyxPQUFRLE1BQ1JMLElBQUtBLEVBQ0xNLE9BQVFDLElBQ0osR0FBdUIsS0FBbkJBLEVBQVNDLE9BQWUsQ0FDeEIsTUFBTUMsRUFBTWYsS0FBS0MsTUFBTVksRUFBU0csZUFDMUIsUUFBQ0MsRUFBTyxRQUFFQyxFQUFPLEtBQUVDLEdBQVFKLEVBQ2pCLElBQVpFLEVBQ0FULEVBQVFXLEdBRVJWLEVBQU9TLFFBR1hULEVBQU9JLEVBQVNHLGVBR3hCSSxRQUFVQyxJQUNOWixFQUFPWSxTQTNCdkJDLFFBQVFDLElBQUksaUJBQ1pELFFBQVFDLElBQUksQ0FBQ3JCLFdBQVVDLFNBQVFDLGVBK0ZHLE9BQUQsNkIsUUFDN0IsSUFBS0YsSUFBYUMsRUFBUSxDQUN0QixNQUFNcUIsUUFoQ2lCLE9BQUQsNkJBQzFCLElBQ0ksTUFBT0MsS0FBTUQsU0FBcUJuQixFQWhFekIsdUZBaUVULE9BQU9tQixFQUNULE1BQU9FLEdBSUwsT0FIQUosUUFBUUQsTUFBTUssR0FDZEMsTUFBTSx1QkFDTkMsYUF0RVEsOEJBdUVELE9BeUJQLEdBQTJCLElBQXZCSixFQUFZSyxPQUNaLE1BQU0sSUFBSUMsTUFBTSxpQkFFaEIxQixHQUFjb0IsRUFBWUssU0FDMUJ6QixFQUFhb0IsRUFBWUssT0FBUyxHQUV0QyxNQUFPM0IsU0FBVTZCLEVBQU01QixPQUFRNkIsR0FBV1IsRUFBWXBCLEdBQ3RERixFQUFXNkIsRUFDWDVCLEVBQW9CLFdBQVg2QixFQUF1QixVQUFZLFVBQzVDbkMsYUFBYW9DLFFBQVEsZ0JBQWlCakMsS0FBS2tDLFVBQVUsQ0FBQ2hDLFdBQVVDLFNBQVFDLGdCQUc1RSxNQUNNK0IsUUFsQ1ksRUFBT0MsRUFBYWpDLElBQW1CLE9BQUQsNkJBQ3hELE1BQU9zQixLQUFNWSxTQTlDakIsU0FBeUJELEVBQWFqQyxHQUNsQyxPQUFPLElBQUlJLFNBQVEsQ0FBQ0MsRUFBU0MsS0FDekJDLGtCQUFrQixDQUNkQyxPQUFRLE9BQ1JMLElBaENXLDZFQWlDWGEsS0FBTW5CLEtBQUtrQyxVQUFVLENBQ2pCLGlCQUFvQixHQUNwQixlQUFrQixHQUNsQixLQUFRLEVBQ1IsS0FBUSxHQUNSLElBQU9FLEVBQ1AsT0FBVWpDLElBRWRTLE9BQVFDLElBQ0osR0FBdUIsS0FBbkJBLEVBQVNDLE9BQWUsQ0FDeEIsTUFBTUMsRUFBTWYsS0FBS0MsTUFBTVksRUFBU0csZUFDMUIsUUFBQ0MsRUFBTyxRQUFFQyxFQUFPLEtBQUVDLEdBQVFKLEVBQ2pCLElBQVpFLEVBQ0FULEVBQVFXLEdBRVJWLEVBQU9TLFFBR1hULEVBQU9JLEVBQVNHLGVBR3hCSSxRQUFVQyxJQUNOWixFQUFPWSxTQW1CaUJpQixDQUFnQkYsRUFBS2pDLEdBQ3pELE9BQU9rQyxLQStCa0JFLENBQWNyQyxFQUFVQyxJQUN0QnFDLEtBQUlDLEdBN0JSLEVBQU9DLEVBQXNCTixFQUFhakMsSUFBbUIsT0FBRCw2QkFDbkYsTUFBTSxHQUFDd0MsR0FBTUQsRUFDUEUsRUFBUyxjQUFjRCxTQUFVUCxZQUFjakMsSUFDckQsSUFBSTBDLFFBQXNCeEMsRUFoRkEsK0VBZ0Z1Q3VDLEdBQ2pFLE1BQU0sS0FBQ0UsR0FBUUosRUFDZixJQUFJSyxFRm9DRCxTQUEwQkMsR0FFN0IsSUFBSyxJQUFJQyxLQUFLMUQsRUFBVSxDQUNwQixNQUFNLEtBQUN1RCxFQUFJLE9BQUVJLEdBQVVELEVBQ3ZCLEdBQUlELEdBQWFGLEVBQ2IsT0FBT0ksRUFJZixPQURBNUIsUUFBUUQsTUFBTSxHQUFHMkIsU0FDVixHRTdDV0csQ0FBaUJMLEdBQ25DLE1BQU1NLEVBQWMsT0FBSCx3QkFDVlYsR0FBUyxDQUNaUSxPQUFRSCxJQUVaLE9BQU8sZUFBQ0wsVUFBV1UsR0FBZ0JQLE1BbUJDUSxDQUFtQlosRUFBR3ZDLEVBQVVDLEtBQzlEbUQsRUFBYSxHLElBQ25CLElBQW9CLElBQU8sRUFBUCxFLHllQUFBLENBQUFuQixLQUFPLHlCQUFoQixJQUFJb0IsRUFBQyxRQUNaRCxFQUFXRSxLQUFLRCxJLHlHQUVwQixPQUFPRCxLQUlLRyxNQUNaMUMsSUFDSU8sUUFBUUMsSUFBSVIsR0FDWkEsRUFBSTJDLFNBQ0FDLEtEaklMLFNBQXNCQyxHQUV6QixNQUFNLFVBQUNsQixFQUFTLFdBQUVtQixHQUFjRCxHQUMxQixLQUFDZCxFQUFJLE9BQUVJLEdBQVVSLEVBRXZCLElBQUlvQixFQVRrQkMsSUFBSUMsTUFVMUIsTUFBTW5DLEVBQVNpQyxFQUFVakMsT0FDbkJvQyxFQUFZSCxFQUFVRyxXQUFVQyxHQUFlLGFBQVZBLEVBQUVDLE1BQXVCRCxFQUFFeEIsV0FBYVEsS0FFN0UsY0FBQ2tCLEdBQWlCMUIsRUFDbEIyQixFQXlJVixTQUE2QkQsRUFBdUJ0QixHQUNoRCxJQUFJd0IsRUFBc0I5RSxFQUFvQixHQUMxQytFLEVBQVksRUFDaEIsSUFBSyxJQUFJRixLQUFtQjdFLEVBQXFCLENBQzdDLE1BQU0sTUFBQ0MsR0FBUzRFLEVBQ2hCLEtBQUlELEdBQWlCM0UsR0FLckIsT0FBSThFLEdBQWE5RSxHQUNiNkIsUUFBUUMsSUFBSSxzQkFBc0J1QixVQUMzQnVCLEdBRUFDLEVBUlBDLEVBQVk5RSxFQUNaNkUsRUFBc0JELEVBVTlCLE9BQU9DLEVBMUprQ0EsQ0FBb0JGLEVBQWV0QixJQUVyRXNCLGNBQWVJLEdBQWlCWCxFQUFXLElBQzNDTyxjQUFlSyxHQUFnQlosRUFBVyxJQUMxQ08sY0FBZU0sR0FBZ0JiLEVBQVcsR0FFakQsR0FBSUksRUFBWSxFQUFHLENBS2YsTUFBTVUsRUFBK0IsQ0FDakNSLEtBQU0sWUFDTnpCLFVBQVdRLEVBQ1gwQixRQUFTUCxFQUNUUSxLQUFNUixFQUNOMUIsR0FBSWQsR0FFRmlELEVBQXlCLENBQzNCWCxLQUFNLFNBQ056QixVQUFXUSxFQUNYNkIsSUFBSSxFQUNKQyxJQUFJLEVBQ0pDLE9BQVEsQ0FDSkwsUUFBU0osRUFDVEssS0FBTUwsR0FFVlUsTUFBTyxDQUNITixRQUFTSCxFQUNUSSxLQUFNSixHQUVWVSxNQUFPLENBQ0hQLFFBQVNGLEVBQ1RHLEtBQU1ILEdBRVYvQixHQUFJZCxFQUFTLEdBSWpCa0MsSUFBSXFCLFFBQVFULEdBQ0UsWUFBVnpCLEVBRUFhLElBQUlxQixRQUFRTixHQUVaeEQsUUFBUUMsSUFBSSwyQkFFYixDQUNILE1BQU04RCxFQUFtQnZCLEVBQVVHLElBQzdCLEtBQUNZLEdBQVFRLEdBQ1QsTUFBQzVGLEVBQUssSUFBRUMsR0FBT21GLEdBQ2RwRixNQUFPNkYsRUFBYzVGLElBQUs2RixHQUFjbEIsRUFFekNNLEVBQStCLENBQ2pDUixLQUFNLFlBQ056QixVQUFXUSxFQUNYMEIsUUFBU1AsRUFDVFEsS0FBTVMsR0FBZ0I3RixHQUFTOEYsR0FBYzdGLEVBQU0yRSxFQUFrQlEsRUFDckVsQyxHQUFJZCxHQUdSa0MsSUFBSXFCLFFBQVFULEdBR2hCLE1BQU1hLEVBQWExQixFQUFVRyxXQUFVQyxHQUFlLFVBQVZBLEVBQUVDLE1BQW9CRCxFQUFFeEIsV0FBYVEsSUFFakYsSUFBSTRCLEVBQ0osR0FBSVUsRUFBYSxFQUdiVixFQUFhLENBQ1RYLEtBQU0sU0FDTnpCLFVBQVdRLEVBQ1g2QixJQUFJLEVBQ0pDLElBQUksRUFDSkMsT0FBUSxDQUNKTCxRQUFTSixFQUNUSyxLQUFNTCxHQUVWVSxNQUFPLENBQ0hOLFFBQVNILEVBQ1RJLEtBQU1KLEdBRVZVLE1BQU8sQ0FDSFAsUUFBU0YsRUFDVEcsS0FBTUgsR0FFVi9CLEdBQUlkLE9BSUwsQ0FDSCxNQUFNd0QsRUFBeUJ2QixFQUFVMEIsSUFDbkMsT0FBQ1AsRUFBTSxNQUFFQyxFQUFLLE1BQUVDLEdBQVNFLEdBQ3hCUixLQUFNWSxHQUFjUixHQUNwQkosS0FBTWEsR0FBYVIsR0FDbkJMLEtBQU1jLEdBQWFSLEVBQzFCTCxFQUFhLE9BQUgsd0JBQ0hPLEdBQVUsQ0FDYkosT0FBUSxDQUNKTCxRQUFTSixFQUNUSyxLQUFNTCxFQUFnQmlCLEVBQWFqQixFQUFnQmlCLEdBQ3BEUCxNQUFPLENBQ05OLFFBQVNILEVBQ1RJLEtBQU1KLEVBQWVpQixFQUFZakIsRUFBZWlCLEdBQ2pEUCxNQUFPLENBQ05QLFFBQVNGLEVBQ1RHLEtBQU1ILEVBQWVpQixFQUFZakIsRUFBZWlCLEtBSTlDLFlBQVZ6QyxFQUVBYSxJQUFJcUIsUUFBUU4sR0FFWnhELFFBQVFDLElBQUksdUJDTUpxRSxDQUFhakMsVSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG5hbWVMaXN0ID0gW1xyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwidHJhdmVsZXJcIixcclxuICAgICAgICBcIm5hbWVcIjogXCLml4XooYzogIVcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcIm5hbWVFblwiOiBcImFsYmVkb1wiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIumYv+i0neWkmlwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwiYW1iZXJcIixcclxuICAgICAgICBcIm5hbWVcIjogXCLlronmn49cIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcIm5hbWVFblwiOiBcImJhcmJhcmFcIixcclxuICAgICAgICBcIm5hbWVcIjogXCLoiq3oiq3mi4lcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcIm5hbWVFblwiOiBcImJlaWRvdVwiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIuWMl+aWl1wiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwiYmVubmV0dFwiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIuePreWwvOeJuVwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwiY2hvbmd5dW5cIixcclxuICAgICAgICBcIm5hbWVcIjogXCLph43kupFcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcIm5hbWVFblwiOiBcImRpbHVjXCIsXHJcbiAgICAgICAgXCJuYW1lXCI6IFwi6L+q5Y2i5YWLXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgXCJuYW1lRW5cIjogXCJkaW9uYVwiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIui/quWlpeWonFwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwiZXVsYVwiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIuS8mOiPiFwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwiZmlzY2hsXCIsXHJcbiAgICAgICAgXCJuYW1lXCI6IFwi6I+y6LCi5bCUXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgXCJuYW1lRW5cIjogXCJnYW55dVwiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIueUmOmbqFwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwiaHV0YW9cIixcclxuICAgICAgICBcIm5hbWVcIjogXCLog6HmoYNcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcIm5hbWVFblwiOiBcImplYW5cIixcclxuICAgICAgICBcIm5hbWVcIjogXCLnkLRcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcIm5hbWVFblwiOiBcImthZWRlaGFyYWthenVoYVwiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIuaeq+WOn+S4h+WPtlwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwia2FleWFcIixcclxuICAgICAgICBcIm5hbWVcIjogXCLlh6/kuppcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcIm5hbWVFblwiOiBcImtlcWluZ1wiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIuWIu+aZtFwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwia2xlZVwiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIuWPr+iOiVwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwibGlzYVwiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIuS4veiOjlwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwibHVtaW5lXCIsXHJcbiAgICAgICAgXCJuYW1lXCI6IFwi6I2nXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgXCJuYW1lRW5cIjogXCJtb25hXCIsXHJcbiAgICAgICAgXCJuYW1lXCI6IFwi6I6r5aicXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgXCJuYW1lRW5cIjogXCJuaW5nZ3VhbmdcIixcclxuICAgICAgICBcIm5hbWVcIjogXCLlh53lhYlcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcIm5hbWVFblwiOiBcIm5vZWxsZVwiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIuivuuiJvuWwlFwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwicWlxaVwiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIuS4g+S4g1wiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwicmF6b3JcIixcclxuICAgICAgICBcIm5hbWVcIjogXCLpm7fms71cIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcIm5hbWVFblwiOiBcInJvc2FyaWFcIixcclxuICAgICAgICBcIm5hbWVcIjogXCLnvZfojo7ojonkuppcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcIm5hbWVFblwiOiBcInN1Y3Jvc2VcIixcclxuICAgICAgICBcIm5hbWVcIjogXCLnoILns5ZcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcIm5hbWVFblwiOiBcInRhcnRhZ2xpYVwiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIui+vui+vuWIqeS6mlwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwidmVudGlcIixcclxuICAgICAgICBcIm5hbWVcIjogXCLmuKnov6pcIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcIm5hbWVFblwiOiBcInhpYW5nbGluZ1wiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIummmeiPsVwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwieGlhb1wiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIumtiFwiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwieGluZ3FpdVwiLFxyXG4gICAgICAgIFwibmFtZVwiOiBcIuihjOeni1wiXHJcbiAgICB9LFxyXG4gICAge1xyXG4gICAgICAgIFwibmFtZUVuXCI6IFwieGlueWFuXCIsXHJcbiAgICAgICAgXCJuYW1lXCI6IFwi6L6b54SxXCJcclxuICAgIH0sXHJcbiAgICB7XHJcbiAgICAgICAgXCJuYW1lRW5cIjogXCJ5YW5mZWlcIixcclxuICAgICAgICBcIm5hbWVcIjogXCLng5/nu69cIlxyXG4gICAgfSxcclxuICAgIHtcclxuICAgICAgICBcIm5hbWVFblwiOiBcInpob25nbGlcIixcclxuICAgICAgICBcIm5hbWVcIjogXCLpkp/nprtcIlxyXG4gICAgfV1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDaGFyYWN0ZXJOYW1lKHF1ZXJ5TmFtZTogc3RyaW5nKSB7XHJcblxyXG4gICAgZm9yIChsZXQgZSBvZiBuYW1lTGlzdCkge1xyXG4gICAgICAgIGNvbnN0IHtuYW1lLCBuYW1lRW59ID0gZVxyXG4gICAgICAgIGlmIChxdWVyeU5hbWUgPT0gbmFtZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmFtZUVuO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNvbnNvbGUuZXJyb3IoYCR7cXVlcnlOYW1lfeafpeivouWksei0pWApXHJcbiAgICByZXR1cm4gXCJcIlxyXG59XHJcbiIsImltcG9ydCBHb2FsID0gc2VlbGllLkdvYWw7XHJcbmltcG9ydCB7bW9ob3lvfSBmcm9tIFwiLi9AdHlwZS9tb2hveW9cIjtcclxuaW1wb3J0IENoYXJhY3RlckRhdGFFeCA9IG1vaG95by5DaGFyYWN0ZXJEYXRhRXg7XHJcbmltcG9ydCBDaGFyYWN0ZXJTdGF0dXMgPSBzZWVsaWUuQ2hhcmFjdGVyU3RhdHVzO1xyXG5pbXBvcnQgQ2hhcmFjdGVyR29hbCA9IHNlZWxpZS5DaGFyYWN0ZXJHb2FsO1xyXG5pbXBvcnQgVGFsZW50R29hbCA9IHNlZWxpZS5UYWxlbnRHb2FsO1xyXG5cclxuXHJcbmNvbnN0IGdldFRvdGFsR29hbCA9ICgpID0+IHtcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGNvbnN0IGdvYWxzOiBHb2FsW10gPSB2dWUuZ29hbHM7XHJcbiAgICByZXR1cm4gZ29hbHM7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkQ2hhcmFjdGVyKGNoYXJhY3RlckRhdGFFeDogQ2hhcmFjdGVyRGF0YUV4KSB7XHJcblxyXG4gICAgY29uc3Qge2NoYXJhY3Rlciwgc2tpbGxfbGlzdH0gPSBjaGFyYWN0ZXJEYXRhRXg7XHJcbiAgICBjb25zdCB7bmFtZSwgbmFtZUVufSA9IGNoYXJhY3RlcjtcclxuXHJcbiAgICBsZXQgdG90YWxHb2FsOiBHb2FsW10gPSBnZXRUb3RhbEdvYWwoKTtcclxuICAgIGNvbnN0IGxlbmd0aCA9IHRvdGFsR29hbC5sZW5ndGg7XHJcbiAgICBjb25zdCBmaW5kSW5kZXggPSB0b3RhbEdvYWwuZmluZEluZGV4KGcgPT4gZy50eXBlID09IFwiY2hhcmFjdGVyXCIgJiYgZy5jaGFyYWN0ZXIgPT0gbmFtZUVuKTtcclxuXHJcbiAgICBjb25zdCB7bGV2ZWxfY3VycmVudH0gPSBjaGFyYWN0ZXI7XHJcbiAgICBjb25zdCBjaGFyYWN0ZXJTdGF0dXM6IENoYXJhY3RlclN0YXR1cyA9IGluaXRDaGFyYWN0ZXJTdGF0dXMobGV2ZWxfY3VycmVudCwgbmFtZSk7XHJcblxyXG4gICAgY29uc3Qge2xldmVsX2N1cnJlbnQ6IG5vcm1hbEN1cnJlbnR9ID0gc2tpbGxfbGlzdFswXTtcclxuICAgIGNvbnN0IHtsZXZlbF9jdXJyZW50OiBza2lsbEN1cnJlbnR9ID0gc2tpbGxfbGlzdFsxXTtcclxuICAgIGNvbnN0IHtsZXZlbF9jdXJyZW50OiBidXJzdEN1cnJlbnR9ID0gc2tpbGxfbGlzdFsyXTtcclxuXHJcbiAgICBpZiAoZmluZEluZGV4IDwgMCkge1xyXG4gICAgICAgIC8ve1widHlwZVwiOlwiY2hhcmFjdGVyXCIsXCJjaGFyYWN0ZXJcIjpcInRyYXZlbGVyXCIsXCJjdXJyZW50XCI6e1wibGV2ZWxcIjo3MCxcImFzY1wiOjQsXCJ0ZXh0XCI6XCI3MFwifSxcImdvYWxcIjp7XCJsZXZlbFwiOjcwLFwiYXNjXCI6NCxcInRleHRcIjpcIjcwXCJ9LFwiaWRcIjoxfSxcclxuICAgICAgICAvL3tcInR5cGVcIjpcInRhbGVudFwiLFwiY2hhcmFjdGVyXCI6XCJ0cmF2ZWxlcl9nZW9cIixcImMzXCI6ZmFsc2UsXCJjNVwiOmZhbHNlLFwibm9ybWFsXCI6e1wiY3VycmVudFwiOjEsXCJnb2FsXCI6Nn0sXCJza2lsbFwiOntcImN1cnJlbnRcIjoxLFwiZ29hbFwiOjZ9LFwiYnVyc3RcIjp7XCJjdXJyZW50XCI6MSxcImdvYWxcIjo2fSxcImlkXCI6Mn1cclxuICAgICAgICAvL+WIneWni+WMluS4pOadoeaVsOaNrlxyXG4gICAgICAgIC8vIGluaXRCeUNoYXJhY3RlcihjaGFyYWN0ZXIsbGVuZ3RoKVxyXG4gICAgICAgIGNvbnN0IGNoYXJhY3RlckdvYWw6IENoYXJhY3RlckdvYWwgPSB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiY2hhcmFjdGVyXCIsXHJcbiAgICAgICAgICAgIGNoYXJhY3RlcjogbmFtZUVuLFxyXG4gICAgICAgICAgICBjdXJyZW50OiBjaGFyYWN0ZXJTdGF0dXMsXHJcbiAgICAgICAgICAgIGdvYWw6IGNoYXJhY3RlclN0YXR1cyxcclxuICAgICAgICAgICAgaWQ6IGxlbmd0aFxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB0YWxlbnRHb2FsOiBUYWxlbnRHb2FsID0ge1xyXG4gICAgICAgICAgICB0eXBlOiBcInRhbGVudFwiLFxyXG4gICAgICAgICAgICBjaGFyYWN0ZXI6IG5hbWVFbixcclxuICAgICAgICAgICAgYzM6IGZhbHNlLFxyXG4gICAgICAgICAgICBjNTogZmFsc2UsXHJcbiAgICAgICAgICAgIG5vcm1hbDoge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudDogbm9ybWFsQ3VycmVudCxcclxuICAgICAgICAgICAgICAgIGdvYWw6IG5vcm1hbEN1cnJlbnRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2tpbGw6IHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQ6IHNraWxsQ3VycmVudCxcclxuICAgICAgICAgICAgICAgIGdvYWw6IHNraWxsQ3VycmVudFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBidXJzdDoge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudDogYnVyc3RDdXJyZW50LFxyXG4gICAgICAgICAgICAgICAgZ29hbDogYnVyc3RDdXJyZW50XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGlkOiBsZW5ndGggKyAxXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdnVlLmFkZEdvYWwoY2hhcmFjdGVyR29hbClcclxuICAgICAgICBpZiAobmFtZUVuICE9IFwidHJhdmVsZXJcIikge1xyXG4gICAgICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgICAgIHZ1ZS5hZGRHb2FsKHRhbGVudEdvYWwpXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCLml6Dms5XliKTmlq3ml4XooYzogIXlhYPntKDnsbvlnoss6K+36Ieq6KGM6K6+572u5aSp6LWLXCIpXHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zdCBzZWVsaWVHb2FsOiBHb2FsID0gdG90YWxHb2FsW2ZpbmRJbmRleF07XHJcbiAgICAgICAgY29uc3Qge2dvYWx9ID0gc2VlbGllR29hbDtcclxuICAgICAgICBjb25zdCB7bGV2ZWwsIGFzY30gPSBnb2FsO1xyXG4gICAgICAgIGNvbnN0IHtsZXZlbDogbGV2ZWxDdXJyZW50LCBhc2M6IGFzY0N1cnJlbnR9ID0gY2hhcmFjdGVyU3RhdHVzO1xyXG5cclxuICAgICAgICBjb25zdCBjaGFyYWN0ZXJHb2FsOiBDaGFyYWN0ZXJHb2FsID0ge1xyXG4gICAgICAgICAgICB0eXBlOiBcImNoYXJhY3RlclwiLFxyXG4gICAgICAgICAgICBjaGFyYWN0ZXI6IG5hbWVFbixcclxuICAgICAgICAgICAgY3VycmVudDogY2hhcmFjdGVyU3RhdHVzLFxyXG4gICAgICAgICAgICBnb2FsOiBsZXZlbEN1cnJlbnQgPj0gbGV2ZWwgJiYgYXNjQ3VycmVudCA+PSBhc2MgPyBjaGFyYWN0ZXJTdGF0dXMgOiBnb2FsLFxyXG4gICAgICAgICAgICBpZDogbGVuZ3RoXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICB2dWUuYWRkR29hbChjaGFyYWN0ZXJHb2FsKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGZpbmRJbmRleDIgPSB0b3RhbEdvYWwuZmluZEluZGV4KGcgPT4gZy50eXBlID09IFwidGFsZW50XCIgJiYgZy5jaGFyYWN0ZXIgPT0gbmFtZUVuKTtcclxuXHJcbiAgICBsZXQgdGFsZW50R29hbDogVGFsZW50R29hbDtcclxuICAgIGlmIChmaW5kSW5kZXgyIDwgMCkge1xyXG4gICAgICAgIC8ve1widHlwZVwiOlwiY2hhcmFjdGVyXCIsXCJjaGFyYWN0ZXJcIjpcInRyYXZlbGVyXCIsXCJjdXJyZW50XCI6e1wibGV2ZWxcIjo3MCxcImFzY1wiOjQsXCJ0ZXh0XCI6XCI3MFwifSxcImdvYWxcIjp7XCJsZXZlbFwiOjcwLFwiYXNjXCI6NCxcInRleHRcIjpcIjcwXCJ9LFwiaWRcIjoxfSxcclxuICAgICAgICAvL3tcInR5cGVcIjpcInRhbGVudFwiLFwiY2hhcmFjdGVyXCI6XCJ0cmF2ZWxlcl9nZW9cIixcImMzXCI6ZmFsc2UsXCJjNVwiOmZhbHNlLFwibm9ybWFsXCI6e1wiY3VycmVudFwiOjEsXCJnb2FsXCI6Nn0sXCJza2lsbFwiOntcImN1cnJlbnRcIjoxLFwiZ29hbFwiOjZ9LFwiYnVyc3RcIjp7XCJjdXJyZW50XCI6MSxcImdvYWxcIjo2fSxcImlkXCI6Mn1cclxuICAgICAgICB0YWxlbnRHb2FsID0ge1xyXG4gICAgICAgICAgICB0eXBlOiBcInRhbGVudFwiLFxyXG4gICAgICAgICAgICBjaGFyYWN0ZXI6IG5hbWVFbixcclxuICAgICAgICAgICAgYzM6IGZhbHNlLFxyXG4gICAgICAgICAgICBjNTogZmFsc2UsXHJcbiAgICAgICAgICAgIG5vcm1hbDoge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudDogbm9ybWFsQ3VycmVudCxcclxuICAgICAgICAgICAgICAgIGdvYWw6IG5vcm1hbEN1cnJlbnRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc2tpbGw6IHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQ6IHNraWxsQ3VycmVudCxcclxuICAgICAgICAgICAgICAgIGdvYWw6IHNraWxsQ3VycmVudFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBidXJzdDoge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudDogYnVyc3RDdXJyZW50LFxyXG4gICAgICAgICAgICAgICAgZ29hbDogYnVyc3RDdXJyZW50XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGlkOiBsZW5ndGhcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgY29uc3Qgc2VlbGllR29hbDogVGFsZW50R29hbCA9IHRvdGFsR29hbFtmaW5kSW5kZXgyXTtcclxuICAgICAgICBjb25zdCB7bm9ybWFsLCBza2lsbCwgYnVyc3R9ID0gc2VlbGllR29hbDtcclxuICAgICAgICBjb25zdCB7Z29hbDogbm9ybWFsR29hbH0gPSBub3JtYWw7XHJcbiAgICAgICAgY29uc3Qge2dvYWw6IHNraWxsR29hbH0gPSBza2lsbDtcclxuICAgICAgICBjb25zdCB7Z29hbDogYnVyc3RHb2FsfSA9IGJ1cnN0O1xyXG4gICAgICAgIHRhbGVudEdvYWwgPSB7XHJcbiAgICAgICAgICAgIC4uLnNlZWxpZUdvYWwsXHJcbiAgICAgICAgICAgIG5vcm1hbDoge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudDogbm9ybWFsQ3VycmVudCxcclxuICAgICAgICAgICAgICAgIGdvYWw6IG5vcm1hbEN1cnJlbnQgPiBub3JtYWxHb2FsID8gbm9ybWFsQ3VycmVudCA6IG5vcm1hbEdvYWxcclxuICAgICAgICAgICAgfSwgc2tpbGw6IHtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQ6IHNraWxsQ3VycmVudCxcclxuICAgICAgICAgICAgICAgIGdvYWw6IHNraWxsQ3VycmVudCA+IHNraWxsR29hbCA/IHNraWxsQ3VycmVudCA6IHNraWxsR29hbFxyXG4gICAgICAgICAgICB9LCBidXJzdDoge1xyXG4gICAgICAgICAgICAgICAgY3VycmVudDogYnVyc3RDdXJyZW50LFxyXG4gICAgICAgICAgICAgICAgZ29hbDogYnVyc3RDdXJyZW50ID4gYnVyc3RHb2FsID8gYnVyc3RDdXJyZW50IDogYnVyc3RHb2FsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAobmFtZUVuICE9IFwidHJhdmVsZXJcIikge1xyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICB2dWUuYWRkR29hbCh0YWxlbnRHb2FsKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIuaXoOazleWIpOaWreaXheihjOiAheWFg+e0oOexu+Weiyzor7foh6rooYzorr7nva7lpKnotYtcIilcclxuICAgIH1cclxuXHJcblxyXG59XHJcblxyXG5jb25zdCBjaGFyYWN0ZXJTdGF0dXNMaXN0OiBDaGFyYWN0ZXJTdGF0dXNbXSA9IFtcclxuICAgIHtsZXZlbDogMSwgYXNjOiAwLCB0ZXh0OiBcIjFcIn0sXHJcbiAgICB7bGV2ZWw6IDIwLCBhc2M6IDAsIHRleHQ6IFwiMjBcIn0sXHJcbiAgICB7bGV2ZWw6IDIwLCBhc2M6IDEsIHRleHQ6IFwiMjAgQVwifSxcclxuICAgIHtsZXZlbDogNDAsIGFzYzogMSwgdGV4dDogXCI0MFwifSxcclxuICAgIHtsZXZlbDogNDAsIGFzYzogMiwgdGV4dDogXCI0MCBBXCJ9LFxyXG4gICAge2xldmVsOiA1MCwgYXNjOiAyLCB0ZXh0OiBcIjUwXCJ9LFxyXG4gICAge2xldmVsOiA1MCwgYXNjOiAzLCB0ZXh0OiBcIjUwIEFcIn0sXHJcbiAgICB7bGV2ZWw6IDYwLCBhc2M6IDMsIHRleHQ6IFwiNjBcIn0sXHJcbiAgICB7bGV2ZWw6IDYwLCBhc2M6IDQsIHRleHQ6IFwiNjAgQVwifSxcclxuICAgIHtsZXZlbDogNzAsIGFzYzogNCwgdGV4dDogXCI3MFwifSxcclxuICAgIHtsZXZlbDogNzAsIGFzYzogNSwgdGV4dDogXCI3MCBBXCJ9LFxyXG4gICAge2xldmVsOiA4MCwgYXNjOiA1LCB0ZXh0OiBcIjgwXCJ9LFxyXG4gICAge2xldmVsOiA4MCwgYXNjOiA2LCB0ZXh0OiBcIjgwIEFcIn0sXHJcbiAgICB7bGV2ZWw6IDkwLCBhc2M6IDYsIHRleHQ6IFwiOTBcIn0sXHJcbl1cclxuXHJcbmZ1bmN0aW9uIGluaXRDaGFyYWN0ZXJTdGF0dXMobGV2ZWxfY3VycmVudDogbnVtYmVyLCBuYW1lOiBzdHJpbmcpIHtcclxuICAgIGxldCBpbml0Q2hhcmFjdGVyU3RhdHVzID0gY2hhcmFjdGVyU3RhdHVzTGlzdFswXTtcclxuICAgIGxldCBpbml0TGV2ZWwgPSAxO1xyXG4gICAgZm9yIChsZXQgY2hhcmFjdGVyU3RhdHVzIG9mIGNoYXJhY3RlclN0YXR1c0xpc3QpIHtcclxuICAgICAgICBjb25zdCB7bGV2ZWx9ID0gY2hhcmFjdGVyU3RhdHVzO1xyXG4gICAgICAgIGlmIChsZXZlbF9jdXJyZW50ID49IGxldmVsKSB7XHJcbiAgICAgICAgICAgIGluaXRMZXZlbCA9IGxldmVsXHJcbiAgICAgICAgICAgIGluaXRDaGFyYWN0ZXJTdGF0dXMgPSBjaGFyYWN0ZXJTdGF0dXNcclxuICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGluaXRMZXZlbCA9PSBsZXZlbCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhg57Gz5ri456S+5pWw5o2u5peg5rOV5Yik5pat5piv5ZCm56qB56C0LOivt+iHquihjOavlOi+gyR7bmFtZX3mmK/lkKblt7LnqoHnoLRgKVxyXG4gICAgICAgICAgICByZXR1cm4gY2hhcmFjdGVyU3RhdHVzXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGluaXRDaGFyYWN0ZXJTdGF0dXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGluaXRDaGFyYWN0ZXJTdGF0dXM7XHJcbn1cclxuIiwiaW1wb3J0IHttb2hveW99IGZyb20gXCIuL0B0eXBlL21vaG95b1wiO1xyXG5pbXBvcnQgUmVzID0gbW9ob3lvLlJlcztcclxuaW1wb3J0IFJvbGUgPSBtb2hveW8uUm9sZTtcclxuaW1wb3J0IERhdGEgPSBtb2hveW8uRGF0YTtcclxuaW1wb3J0IENoYXJhY3RlciA9IG1vaG95by5DaGFyYWN0ZXI7XHJcbmltcG9ydCBDaGFyYWN0ZXJEYXRhID0gbW9ob3lvLkNoYXJhY3RlckRhdGE7XHJcbmltcG9ydCB7Z2V0Q2hhcmFjdGVyTmFtZX0gZnJvbSBcIi4vcXVlcnlcIjtcclxuaW1wb3J0IENoYXJhY3RlckRhdGFFeCA9IG1vaG95by5DaGFyYWN0ZXJEYXRhRXg7XHJcbmltcG9ydCB7YWRkQ2hhcmFjdGVyfSBmcm9tIFwiLi9zZWVsaWVcIjtcclxuaW1wb3J0IHtjb25maWd9IGZyb20gXCIuL2NvbmZpZ1wiO1xyXG5pbXBvcnQge0NvbmZpZ30gZnJvbSBcIi4vQHR5cGVcIjtcclxuXHJcbmNvbnN0IG1paG95b0FjY291bnRTdHIgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm1paG95b0FjY291bnRcIik7XHJcbmxldCBtaWhveW9BY2NvdW50O1xyXG5pZiAobWlob3lvQWNjb3VudFN0cikge1xyXG4gICAgbWlob3lvQWNjb3VudCA9IEpTT04ucGFyc2UobWlob3lvQWNjb3VudFN0cikgYXMgQ29uZmlnXHJcbn1cclxubGV0IHtnYW1lX3VpZCwgcmVnaW9uLCBhY2NvdW50SWR4fSA9IG1paG95b0FjY291bnQgfHwgY29uZmlnXHJcbmNvbnNvbGUubG9nKFwibWlob3lvQWNjb3VudFwiKTtcclxuY29uc29sZS5sb2coe2dhbWVfdWlkLCByZWdpb24sIGFjY291bnRJZHh9KTtcclxuXHJcbmNvbnN0IEJCU19VUkwgPSAnaHR0cHM6Ly9iYnMubWlob3lvLmNvbS95cy8nXHJcbmNvbnN0IFJPTEVfVVJMID0gJ2h0dHBzOi8vYXBpLXRha3VtaS5taWhveW8uY29tL2JpbmRpbmcvYXBpL2dldFVzZXJHYW1lUm9sZXNCeUNvb2tpZT9nYW1lX2Jpej1oazRlX2NuJ1xyXG5jb25zdCBDSEFSQUNURVJTX1VSTCA9ICdodHRwczovL2FwaS10YWt1bWkubWlob3lvLmNvbS9ldmVudC9lMjAyMDA5MjhjYWxjdWxhdGUvdjEvc3luYy9hdmF0YXIvbGlzdCdcclxuY29uc3QgQ0hBUkFDVEVSU19ERVRBSUxfVVJMID0gJ2h0dHBzOi8vYXBpLXRha3VtaS5taWhveW8uY29tL2V2ZW50L2UyMDIwMDkyOGNhbGN1bGF0ZS92MS9zeW5jL2F2YXRhci9kZXRhaWwnXHJcblxyXG5mdW5jdGlvbiBtYWtlR2V0UmVxdWVzdCh1cmw6IHN0cmluZykge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7XHJcbiAgICAgICAgICAgIG1ldGhvZDogXCJHRVRcIixcclxuICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgIG9ubG9hZDogcmVzcG9uc2UgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXMgPSBKU09OLnBhcnNlKHJlc3BvbnNlLnJlc3BvbnNlVGV4dCkgYXMgUmVzPGFueT47XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qge3JldGNvZGUsIG1lc3NhZ2UsIGRhdGF9ID0gcmVzO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXRjb2RlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QocmVzcG9uc2UucmVzcG9uc2VUZXh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgb25lcnJvcjogKGVycm9yOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBtYWtlUG9zdFJlcXVlc3QodWlkOiBzdHJpbmcsIHJlZ2lvbjogc3RyaW5nKSB7XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIEdNX3htbGh0dHBSZXF1ZXN0KHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgdXJsOiBDSEFSQUNURVJTX1VSTCxcclxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgXCJlbGVtZW50X2F0dHJfaWRzXCI6IFtdLFxyXG4gICAgICAgICAgICAgICAgXCJ3ZWFwb25fY2F0X2lkc1wiOiBbXSxcclxuICAgICAgICAgICAgICAgIFwicGFnZVwiOiAxLFxyXG4gICAgICAgICAgICAgICAgXCJzaXplXCI6IDUwLFxyXG4gICAgICAgICAgICAgICAgXCJ1aWRcIjogdWlkLFxyXG4gICAgICAgICAgICAgICAgXCJyZWdpb25cIjogcmVnaW9uXHJcbiAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICBvbmxvYWQ6IHJlc3BvbnNlID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzID0gSlNPTi5wYXJzZShyZXNwb25zZS5yZXNwb25zZVRleHQpIGFzIFJlczxDaGFyYWN0ZXI+O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHtyZXRjb2RlLCBtZXNzYWdlLCBkYXRhfSA9IHJlcztcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmV0Y29kZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChtZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KHJlc3BvbnNlLnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG9uZXJyb3I6IChlcnJvcjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuY29uc3QgZ2V0QWNjb3VudCA9IGFzeW5jICgpID0+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qge2xpc3Q6IGFjY291bnRMaXN0fSA9IGF3YWl0IG1ha2VHZXRSZXF1ZXN0KFJPTEVfVVJMKSBhcyBEYXRhPFJvbGU+O1xyXG4gICAgICAgIHJldHVybiBhY2NvdW50TGlzdDtcclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxyXG4gICAgICAgIGFsZXJ0KFwi6K+356Gu6K6k5bey55m75b2V57Gz5ZOI5ri46K665Z2b5LiU57uR5a6a5Y6f56We6LSm5oi3IVwiKVxyXG4gICAgICAgIEdNX29wZW5JblRhYihCQlNfVVJMKVxyXG4gICAgICAgIHJldHVybiBbXVxyXG4gICAgfVxyXG59O1xyXG5cclxuY29uc3QgZ2V0Q2hhcmFjdGVycyA9IGFzeW5jICh1aWQ6IHN0cmluZywgcmVnaW9uOiBzdHJpbmcpID0+IHtcclxuICAgIGNvbnN0IHtsaXN0OiBjaGFyYWN0ZXJMaXN0fSA9IGF3YWl0IG1ha2VQb3N0UmVxdWVzdCh1aWQsIHJlZ2lvbikgYXMgRGF0YTxDaGFyYWN0ZXI+O1xyXG4gICAgcmV0dXJuIGNoYXJhY3Rlckxpc3Q7XHJcbn07XHJcblxyXG5jb25zdCBnZXRDaGFyYWN0ZXJEZXRhaWwgPSBhc3luYyAoY2hhcmFjdGVyOiBDaGFyYWN0ZXIsIHVpZDogc3RyaW5nLCByZWdpb246IHN0cmluZykgPT4ge1xyXG4gICAgY29uc3Qge2lkfSA9IGNoYXJhY3RlcjtcclxuICAgIGNvbnN0IHBhcmFtcyA9IGA/YXZhdGFyX2lkPSR7aWR9JnVpZD0ke3VpZH0mcmVnaW9uPSR7cmVnaW9ufWBcclxuICAgIGxldCBjaGFyYWN0ZXJEYXRhID0gYXdhaXQgbWFrZUdldFJlcXVlc3QoQ0hBUkFDVEVSU19ERVRBSUxfVVJMICsgcGFyYW1zKSBhcyBDaGFyYWN0ZXJEYXRhO1xyXG4gICAgY29uc3Qge25hbWV9ID0gY2hhcmFjdGVyO1xyXG4gICAgbGV0IG5hbWVFbmdsaXNoID0gZ2V0Q2hhcmFjdGVyTmFtZShuYW1lKTtcclxuICAgIGNvbnN0IGNoYXJhY3RlckV4ID0ge1xyXG4gICAgICAgIC4uLmNoYXJhY3RlcixcclxuICAgICAgICBuYW1lRW46IG5hbWVFbmdsaXNoXHJcbiAgICB9XHJcbiAgICByZXR1cm4ge2NoYXJhY3RlcjogY2hhcmFjdGVyRXgsIC4uLmNoYXJhY3RlckRhdGF9IGFzIENoYXJhY3RlckRhdGFFeDtcclxufTtcclxuXHJcbmNvbnN0IGdldERldGFpbExpc3QgPSBhc3luYyAoKSA9PiB7XHJcbiAgICBpZiAoIWdhbWVfdWlkIHx8ICFyZWdpb24pIHtcclxuICAgICAgICBjb25zdCBhY2NvdW50TGlzdDogbW9ob3lvLlJvbGVbXSA9IGF3YWl0IGdldEFjY291bnQoKTtcclxuICAgICAgICBpZiAoYWNjb3VudExpc3QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIui0puaIt+e7keWumuinkuiJsuS/oeaBr+iOt+WPluWksei0pSFcIilcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFjY291bnRJZHggPj0gYWNjb3VudExpc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIGFjY291bnRJZHggPSBhY2NvdW50TGlzdC5sZW5ndGggLSAxO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7Z2FtZV91aWQ6IGFVaWQsIHJlZ2lvbjogYVJlZ2lvbn0gPSBhY2NvdW50TGlzdFthY2NvdW50SWR4XTtcclxuICAgICAgICBnYW1lX3VpZCA9IGFVaWQ7XHJcbiAgICAgICAgcmVnaW9uID0gYVJlZ2lvbiA9PSBcImNuX2dmMDFcIiA/IFwiY25fZ2YwMVwiIDogXCJjbl9xZDAxXCI7XHJcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJtaWhveW9BY2NvdW50XCIsIEpTT04uc3RyaW5naWZ5KHtnYW1lX3VpZCwgcmVnaW9uLCBhY2NvdW50SWR4fSkpXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgY2hhcmFjdGVycyA9IGF3YWl0IGdldENoYXJhY3RlcnMoZ2FtZV91aWQsIHJlZ2lvbik7XHJcbiAgICBjb25zdCBkZXRhaWxzID0gY2hhcmFjdGVycy5tYXAoYyA9PiBnZXRDaGFyYWN0ZXJEZXRhaWwoYywgZ2FtZV91aWQsIHJlZ2lvbikpO1xyXG4gICAgY29uc3QgZGV0YWlsTGlzdCA9IFtdO1xyXG4gICAgZm9yIGF3YWl0IChsZXQgZCBvZiBkZXRhaWxzKSB7XHJcbiAgICAgICAgZGV0YWlsTGlzdC5wdXNoKGQpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGRldGFpbExpc3Q7XHJcbn1cclxuXHJcblxyXG5nZXREZXRhaWxMaXN0KCkudGhlbihcclxuICAgIHJlcyA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzKTtcclxuICAgICAgICByZXMuZm9yRWFjaChcclxuICAgICAgICAgICAgdiA9PiB7XHJcbiAgICAgICAgICAgICAgICBhZGRDaGFyYWN0ZXIodilcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIClcclxuICAgIH1cclxuKVxyXG4iLCJpbXBvcnQge0NvbmZpZ30gZnJvbSBcIi4vQHR5cGVcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XHJcbiAgICBnYW1lX3VpZDogXCJcIiwvLzUwMTcyNTE3MlxyXG4gICAgcmVnaW9uOiBcImNuX3FkMDFcIiwvL1xyXG4gICAgYWNjb3VudElkeDogMFxyXG59IGFzIENvbmZpZztcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==